---           
layout: post
title: Linux Çekirdeği Derledim!
date: 2013-03-09 19:43:29 UTC
updated: 2013-03-09 19:43:29 UTC
comments: false
categories: derleme kernel linux
---
<i>This post also available in&nbsp;<a href="http://ztugcesirin.wordpress.com/2013/03/09/i-compiled-a-linux-kernel/" target="_blank">English</a>. </i><br /><br />Heyecanlı başlığıma bakıp aldanmayın sakın öyle çok aşırı harika bir iş yapmadım işin doğrusu. Uzun süreden beri sıfırdan Linux kurmak gibi bir düşüncem vardı. Sıfırdan Linux kurmak için ingilizce Linux From Scratch diye bir site var. Orayı kendime referans alıp ablamın eski bilgisayarını bu eğitim emellerim uğruna kullanacaktım. Uzun bir süre ertelemek durumunda kaldım bu işi. Çünkü bu uzun sürecek bir iş (en azından benim için) ve o sebeple boş zamanımın çok olduğu bir anı bekliyordum. Her ne kadar dünyanın en meşgul insanı olmasamda bir türlü bu işe başlamak için gereken boşluğu bulamadım. Ama en son olduğumuz Linux 101 sertifika sınavından sonra daha fazla beklemenin anlamsız olduğunu düşünmeye başladım. (Sertifika sınavı ile ilgili bir yazı yazacağım ayrıca.)<br /><br />Dün akşam bu işe başlamadan önce ilk olarak bir kernel (çekirdek) derleyip nasıl olduğuna bakayım dedim. İnternette bununla ilgili kaynak bulmak zor olmadı. (Gerçi Türkçe NASIL kaynağı baya eskiydi ama ubuntu forumunda güzel anlatımlar vardı.) Önüme kendi bilgisayarımdan 2-3 tane İngilizce ve Türkçe kaynak açıp diğer bilgisayarda kernel derleme işlemine başladım. Bununla ilgili dediğim gibi kaynak bulmak zor değil ama yaptığım adımları not aldım. Onlardan kısaca bahsedebilirim.<br /><br />Öncelikle konsolda root oldum. Kernel.org adresinden en son kernel sürümünün (3.8.1) linkini kopyalayarak konsoldan<br /><br /><i>wget link&nbsp;</i><br /><br />komutuyla kerneli /usr/src altına indirdim.<br /><br /><i>tar xvjf kernel.tar.bz2&nbsp;</i><br /><br />komutunu kullanarak dosyayı açtım. Açma işlemi 1-2 dakika sürdü diye hatırlıyorum. Sonra kernel için seçenekleri belirlemek için varolan 3 yoldan konsoldan yönetilebilen menüyü seçtim. Bunun için<br /><br /><i>make menuconfig&nbsp;</i><br /><br />komutunu kullandım. Tabi bu komutu kullanabilmek için ncurses kütüphanesinin bilgisayarınızda kurulu olması gerekiyor uyarısını alıp<br /><br /><i>apt-get install libncurses5-dev&nbsp;</i><br /><br />paketini kurdum. Sonra menuconfig aracılığıyla kernelde yapabileceğim düzenlemelere baktım. O kadar çok seçenek var ki açıkçası anladıklarım %5-6 kadardı. Baya bir dolaştım menü içinde işlemci özelleştirmeleriyle oynadım biraz. Çok anlamadığım için fazla değişiklik yapamadım ne yazık ki. Sonra kerneli derlemek için<br /><br /><i>make-kpkg clean&nbsp;</i><br /><br /><i>make-kpkg kernel-image kernel_headers --initrd&nbsp;</i><br /><br />komutlarını kullandım. Bunların kullanılabilmesi için kernel-package ın kurulu olması gerekiyor. Derleme işlemi en az 20 dakika sürer diye okumuştum ama bende o kadar uzun sürdü ki bir şeyleri yanlış yaptım herhalde diye şüphelenmedim değil. En son bilgisayarı kendi haline bırakıp uyumayı düşünüyordum, uyumadan önce kitap okurken kafamı kaldırdığımda ne görsem beğenirsiniz. Derleme bitmiş, konsol öylece beni bekliyor işime devam edeyim diye.<br /><br /><i>dpkg -i header image&nbsp;</i><br /><br />şeklinde kerneli kurduktan sonra bilgisayarı yeniden başlatıp yeni kernel ile kullanmaya başladım. İşlemlerde yanlışlık olmadığını görmek için<br /><br /><i>cat /proc/version</i><br /><i>uname -r&nbsp;</i><br /><br />komutlarıyla kernel versiyonumun 3.8.1 olduğunu doğruladım. Wireless kartımın bilgisayar tarafından tanınmadığını fark ettiğimdeyse saat çok geç olmuştu.  ifconfig ve ifconfig -a ile kontrol ettim ama malesef kablosuz görünmüyordu. O sebeple az önce<br /><br /><i>sudo apt-get purge linux-image-3.8.1*&nbsp;</i><br /><br />komutuyla yeni kerneli kaldırdım ve bilgisayarı yeniden başlatarak eski kernelime dönüş yaptım.